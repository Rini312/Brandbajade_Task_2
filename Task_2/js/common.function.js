var isLoading=!1;function jsonData(e,t=void 0){var n,e=$(e).serializeArray(),a=e.map(function(e){var t="true"===e.value||"false"!==e.value&&(isNaN(e.value)?e.value:parseInt(e.value));return{name:e.name,value:t}});if(null!=t){const i=t;n=[...e].filter(e=>e.name==i).map(e=>e.value)}for(var l={},o=0;o<a.length;o++){if(""==a[o].value)return!1;l[a[o].name]=a[o].value}if(null!=t){delete l[t];l[t]=n.toString()}return JSON.stringify(l)}const makeAjaxRequest=async(e,t,n,a)=>{return await $.ajax({url:e+"-api.php",type:n,data:t,dataType:"json",contentType:"application/json",beforeSend:function(e){}})},makeAjaxRequestNodata=async(e,t)=>{e=await $.ajax({url:e+"-api.php",type:t,dataType:"json",contentType:"application/json",beforeSend:function(e){isLoading=!0;togglePreloader(isLoading,preloader)}});isLoading=!1;togglePreloader(isLoading,preloader);return e},makeAjaxRequestWithParam=async(e,t,n,a)=>{return await $.ajax({url:e+"-api.php?"+t,type:a,data:n,dataType:"json",contentType:"application/json"})},populateHtmldata=(e,t,n,a=!1,l=null)=>{$.ajax({url:e+"-api.php",type:t,data:l,success:function(e){a?$(n).append(e):$(n).html(e)}})},populateHtmldataAsync=async(e,t,n,a=!1,l=null)=>{try{await $.ajax({url:e+"-api.php",type:t,data:l,success:function(e){a?$(n).append(e):$(n).html(e)}});return!0}catch(e){}},createiframe=n=>{const a=document.createElement("iframe");a.setAttribute("srcdoc","<html><body></body></html>");document.body.appendChild(a);a.addEventListener("load",function(){const e=document.getElementById(n).cloneNode(),t=(e.style.maxWidth="100%",a.contentDocument.body);t.style.textAlign="center";t.appendChild(e);e.addEventListener("load",function(){a.contentWindow.print()})});a.contentWindow.addEventListener("afterprint",function(){a.parentNode.removeChild(a)});setTimeout(()=>{a.parentNode.removeChild(a)},1e3)},showQrOptions=()=>{var a;const e=document.querySelectorAll(".qr-code-table");e.forEach(n=>{n.addEventListener("click",()=>{0;a=n.nextElementSibling.id;toggleQrOptions(a);const e=n.parentElement.firstElementChild.id,t=document.getElementById(a+"-print");t.addEventListener("click",()=>{createiframe(e)})})});document.addEventListener("click",e=>{if("qr-code-table"!==e.target.className){0;toggleQrOptions()}})},toggleQrOptions=(e=null)=>{null!=e?document.getElementById(e).style.visibility="visible":document.querySelectorAll(".qr-action-btn-container").forEach(e=>e.style.visibility="hidden")},togglePreloader=(e,t=!0)=>{const n=document.getElementById(e);n.style.display=t?"flex":"none"},handleFormError=e=>{showInputError(e.input,e.message,!1);switchBtnPreloader(".cupn_valdt_btn","circle3",!0)},createTable=(e,t)=>{document.getElementById(t)},dataTable=e=>$(e).DataTable({dom:"Bfrtip",buttons:[{extend:"pdf",footer:!0,className:"data-tbl-btn",exportOptions:{columns:":not(.notexport)"}},{extend:"excel",footer:!1,className:"data-tbl-btn",exportOptions:{columns:":not(.notexport)"}}],fnDrawCallback:function(e){if(0==this.fnGetData().length){$(".dt-button").attr("disabled",!0);$(".dt-button").css("background","darkgray")}}});function setBackdropColor(e,t){gsap.to(e,{backgroundColor:"#dbdbdb",borderRadius:2*t,overflow:"hidden",marginBottom:"0.5rem",height:t,display:"flex"})}function setBarColor(e,t,n,a){gsap.fromTo(e,{width:0,height:a},{backgroundColor:n,borderRadius:2*a,width:t+"%",height:a,transition:"linear 0.3s"})}const makeGraph=(e,t,n,a=[],l=[])=>{if(0==e.total){const r=document.createElement("div");r.classList.add("graph-container2");r.style.textAlign="center";r.style.marginTop="2rem";r.innerText="No data available";document.querySelector(n).appendChild(r)}else{var o=Object.values(e),i=Object.keys(e);const r=document.createElement("div");r.classList.add("graph-container2");for(let e=0;e<o.length-1;e++){const d=o[e+1]/o[0]*100,s=document.createElement("div");s.classList.add("bar-info");s.style.position="relative";const c=document.createElement("div");c.style.width="100%";setBackdropColor(c,t);const u=document.createElement("div");u.classList.add("stat-bar");setBarColor(u,d,l[e],t);c.appendChild(u);const p=document.createElement("p");if(0!==p.length){p.innerText=`${a[e]} : ${o[e+1]} (${d.toFixed(2)} %)`;p.setAttribute("data",a[e])}else{p.innerText=`${i[e]} : ${o[e+1]} (${d.toFixed(2)} %)`;p.setAttribute("data",i[e])}const m=document.createElement("div");m.classList.add("info-modal-body");s.appendChild(p);s.appendChild(c);s.appendChild(m);r.appendChild(s)}document.querySelector(n).appendChild(r)}},handleItemDeletion=async(e,n,a,l,o)=>{const t=document.getElementById(e);t&&t.addEventListener("click",async e=>{e=e.target.getAttribute(n),e=JSON.stringify({id:e});try{var t=await makeAjaxRequest(a,e,"POST");if(200===t.status){$(l).modal("hide");o()}}catch(e){Toast.fire({icon:"error",title:"Error!",text:e.responseJSON.message,confirmButtonText:!1})}})},checkEmptydata=e=>{const t=document.getElementById(e).querySelectorAll("input, textarea");t.forEach(e=>{if(!e.classList.contains("not-reqd"))if(""==e.value){e.style.border="1px solid red";null!==e.nextElementSibling&&(e.nextElementSibling.style.display="block")}else{e.style.border="1px solid #ced4da";null!==e.nextElementSibling&&(e.nextElementSibling.style.display="none")}})};function validateName(e){/^[A-Za-z ]+$/.test(e.key)||e.preventDefault()}function validateNumber(e){(!/^[0-9]+$/.test(e.key)||10<=e.target.value.length)&&e.preventDefault()}function validateCountryCode(e){(!/^[0-9+]+$/.test(e.key)||4<=e.target.value.length)&&e.preventDefault()}const validateEmail=e=>{if(e.target.value.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)){e.target.classList.remove("is-invalid");e.target.classList.add("is-valid");$("#form-btn").removeAttr("disabled")}else{e.target.classList.add("is-invalid");$("#form-btn").attr("disabled",!0)}},showInputError=(e,t,n)=>{const a=document.getElementById(e);if(n){if(null!==a.nextElementSibling){a.style.border="1px solid #ced4da";a.nextElementSibling.style.display="none"}}else if(null!==a.nextElementSibling){a.style.border="1px solid red";a.nextElementSibling.style.display="block";a.nextElementSibling.innerText=t}},switchBtnPreloader=(e,t,n)=>{if(n){document.querySelector(e).style.display="block";document.getElementById(t).style.display="none"}else{document.querySelector(e).style.display="none";document.getElementById(t).style.display="block"}},urlBase64ToUint8Array=e=>{e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const t=window.atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n},addGreaptchaToken=(e,t)=>{const n=JSON.parse(e);n.greToken=t;return JSON.stringify(n)};